services:
  domain_path.alias_storage:
    class: Drupal\domain_path\DomainAliasStorage
    public: false
    decorates: path.alias_storage
    decoration_priority: 1
    decoration_inner_name: path.alias_storage.parent
    arguments: ['@database', '@module_handler', '@path.alias_storage.parent']
    tags:
      - { name: backend_overridable }
    calls:
      - [setDomainAccessManager, ['@domain_access.manager']]
      - [setDomainNegotiator, ['@domain.negotiator']]
      - [setEntityTypeManager, ['@entity_type.manager']]
  domain_path.event_subscriber:
    class: Drupal\domain_path\EventSubscriber
    tags:
      - { name: event_subscriber }